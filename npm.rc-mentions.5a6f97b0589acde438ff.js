(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{"4ldJ":function(e,t,n){"use strict";n.r(t);var o=n("TSYQ"),r=n.n(o),a=n("Zm9Q"),i=n("4IlW"),u=n("q1tI"),c=n("VCL8"),s=n("uciX"),l=n("1j5w"),f=n("foW8"),p=n.n(f)()({}),v=p.Provider,h=p.Consumer;function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var b=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=m(this,y(t).apply(this,arguments))).renderDropdown=function(t){var n=t.notFoundContent,o=t.activeIndex,r=t.setActiveIndex,a=t.selectOption,i=t.onFocus,c=e.props,s=c.prefixCls,f=c.options,p=f[o]||{};return u.createElement(l.default,{prefixCls:"".concat(s,"-menu"),activeKey:p.value,onSelect:function(e){var t=e.key,n=f.find(function(e){return e.value===t});a(n)},onFocus:i},f.map(function(e,t){var n=e.value,o=e.disabled,a=e.children,i=e.className,c=e.style;return u.createElement(l.MenuItem,{key:n,disabled:o,className:i,style:c,onMouseEnter:function(){r(t)}},a)}),!f.length&&u.createElement(l.MenuItem,{disabled:!0},n))},e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,u["Component"]),n=t,(o=[{key:"render",value:function(){return u.createElement(h,null,this.renderDropdown)}}])&&d(n.prototype,o),r&&d(n,r),t}();function O(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function x(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var P={bottomRight:{points:["tl","br"],offset:[0,4],overflow:{adjustX:0,adjustY:1}},topRight:{points:["bl","tr"],offset:[0,-4],overflow:{adjustX:0,adjustY:1}}},C=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=x(this,w(t).apply(this,arguments))).getDropdownPrefix=function(){return"".concat(e.props.prefixCls,"-dropdown")},e.getDropdownElement=function(){var t=e.props.options;return u.createElement(b,{prefixCls:e.getDropdownPrefix(),options:t})},e}var n,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(t,u["Component"]),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.children,n=e.visible,o=e.placement,r=e.transitionName,a=this.getDropdownElement();return u.createElement(s.default,{prefixCls:this.getDropdownPrefix(),popupVisible:n,popup:a,popupPlacement:"top"===o?"topRight":"bottomRight",popupTransitionName:r,builtinPlacements:P},t)}}])&&O(n.prototype,o),r&&O(n,r),t}(),E=function(){return null};function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function F(e){return(e||"").toLowerCase()}function I(e,t){var n=t.measureLocation,o=t.prefix,r=t.targetText,a=t.selectionStart,i=t.split,u=e.slice(0,n);u[u.length-i.length]===i&&(u=u.slice(0,u.length-i.length)),u&&(u="".concat(u).concat(i));var c=function(e,t,n){var o=e[0];if(!o||o===n)return e;for(var r=e,a=t.length,i=0;i<a;i+=1){if(F(r[i])!==F(t[i])){r=r.slice(i);break}i===a-1&&(r=r.slice(a))}return r}(e.slice(a),r.slice(a-n-o.length),i);c.slice(0,i.length)===i&&(c=c.slice(i.length));var s="".concat(u).concat(o).concat(r).concat(i);return{text:"".concat(s).concat(c),selectionLocation:s.length}}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function T(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function k(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var R=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.indexOf(o)<0&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(e);r<o.length;r++)t.indexOf(o[r])<0&&(n[o[r]]=e[o[r]])}return n},L=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=k(this,D(t).call(this,e))).focusId=void 0,n.triggerChange=function(e){var t=n.props.onChange;"value"in n.props||n.setState({value:e}),t&&t(e)},n.onChange=function(e){var t=e.target.value;n.triggerChange(t)},n.onKeyDown=function(e){var t=e.which,o=n.state,r=o.activeIndex;if(o.measuring)if(t===i.a.UP||t===i.a.DOWN){var a=n.getOptions().length,u=(r+(t===i.a.UP?-1:1)+a)%a;n.setState({activeIndex:u}),e.preventDefault()}else{if(t===i.a.ESC)return void n.stopMeasure();if(t===i.a.ENTER){var c=n.getOptions()[r];n.selectOption(c),e.preventDefault()}}},n.onKeyUp=function(e){var t,o,r=e.key,a=e.which,u=n.state,c=u.measureText,s=u.measuring,l=n.props,f=l.prefix,p=void 0===f?"":f,v=l.onSearch,h=l.validateSearch,d=e.target,m=(o=(t=d).selectionStart,t.value.slice(0,o)),y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(Array.isArray(t)?t:[t]).reduce(function(t,n){var o=e.lastIndexOf(n);return o>t.location?{location:o,prefix:n}:t},{location:-1,prefix:""})}(m,p),g=y.location,b=y.prefix;if(-1===[i.a.ESC,i.a.UP,i.a.DOWN,i.a.ENTER].indexOf(a))if(-1!==g){var O=m.slice(g+b.length),x=h(O,n.props),w=!!n.getOptions(O).length;x?(r===b||s||O!==c&&w)&&n.startMeasure(O,b,g):s&&n.stopMeasure(),v&&x&&v(O,b)}else s&&n.stopMeasure()},n.onInputFocus=function(e){n.onFocus(e)},n.onInputBlur=function(e){n.onBlur(e)},n.onDropdownFocus=function(){n.onFocus()},n.onFocus=function(e){window.clearTimeout(n.focusId);var t=n.state.isFocus,o=n.props.onFocus;!t&&e&&o&&o(e),n.setState({isFocus:!0})},n.onBlur=function(e){n.focusId=window.setTimeout(function(){var t=n.props.onBlur;n.setState({isFocus:!1}),n.stopMeasure(),t&&t(e)},0)},n.selectOption=function(e){var t=n.state,o=t.value,r=t.measureLocation,a=t.measurePrefix,i=n.props,u=i.split,c=i.onSelect,s=e.value,l=I(o,{measureLocation:r,targetText:void 0===s?"":s,prefix:a,selectionStart:n.textarea.selectionStart,split:u}),f=l.text,p=l.selectionLocation;n.triggerChange(f),n.stopMeasure(function(){var e,t;e=n.textarea,t=p,e.setSelectionRange(t,t),e.blur(),e.focus()}),c&&c(e,a)},n.setActiveIndex=function(e){n.setState({activeIndex:e})},n.setTextAreaRef=function(e){n.textarea=e},n.setMeasureRef=function(e){n.measure=e},n.getOptions=function(e){var t=e||n.state.measureText||"",o=n.props,r=o.children,i=o.filterOption;return Object(a.a)(r).map(function(e){return e.props}).filter(function(e){return!1===i||i(t,e)})},n.state={value:e.defaultValue||e.value||"",measuring:!1,measureLocation:0,measureText:null,measurePrefix:"",activeIndex:0,isFocus:!1},n}var n,o,c;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(t,u["Component"]),n=t,c=[{key:"getDerivedStateFromProps",value:function(e,t){var n={};return"value"in e&&e.value!==t.value&&(n.value=e.value),n}}],(o=[{key:"componentDidUpdate",value:function(){this.state.measuring&&(this.measure.scrollTop=this.textarea.scrollTop)}},{key:"startMeasure",value:function(e,t,n){this.setState({measuring:!0,measureText:e,measurePrefix:t,measureLocation:n,activeIndex:0})}},{key:"stopMeasure",value:function(e){this.setState({measuring:!1,measureLocation:0,measureText:null},e)}},{key:"focus",value:function(){this.textarea.focus()}},{key:"blur",value:function(){this.textarea.blur()}},{key:"render",value:function(){var e=this.state,t=e.value,n=e.measureLocation,o=e.measurePrefix,a=e.measuring,i=e.activeIndex,c=this.props,s=c.prefixCls,l=c.placement,f=c.transitionName,p=c.className,h=c.style,d=c.autoFocus,m=c.notFoundContent,y=function(e){for(var t=S({},e),n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return o.forEach(function(e){delete t[e]}),t}(R(c,["prefixCls","placement","transitionName","className","style","autoFocus","notFoundContent"]),"value","defaultValue","prefix","split","children","validateSearch","filterOption","onSelect","onSearch"),g=a?this.getOptions():[];return u.createElement("div",{className:r()(s,p),style:h},u.createElement("textarea",_({autoFocus:d,ref:this.setTextAreaRef,value:t},y,{onChange:this.onChange,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,onFocus:this.onInputFocus,onBlur:this.onInputBlur})),a&&u.createElement("div",{ref:this.setMeasureRef,className:"".concat(s,"-measure")},t.slice(0,n),u.createElement(v,{value:{notFoundContent:m,activeIndex:i,setActiveIndex:this.setActiveIndex,selectOption:this.selectOption,onFocus:this.onDropdownFocus}},u.createElement(C,{prefixCls:s,transitionName:f,placement:l,options:g,visible:!0},u.createElement("span",null,o))),t.slice(n+o.length)))}}])&&T(n.prototype,o),c&&T(n,c),t}();L.Option=E,L.defaultProps={prefixCls:"rc-mentions",prefix:"@",split:" ",validateSearch:function(e,t){var n=t.split;return!n||-1===e.indexOf(n)},filterOption:function(e,t){var n=t.value,o=void 0===n?"":n,r=e.toLowerCase();return-1!==o.toLowerCase().indexOf(r)},notFoundContent:"Not Found",rows:1},Object(c.polyfill)(L);var M=L;t.default=M}}]);